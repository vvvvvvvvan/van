<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>纪念记录 · 日历</title>
  <link rel="icon" href="favicon.png" type="image/png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
  #sakuraCanvas {
  position: fixed;
  left: 0; top: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 10;
    }
html, body {
  margin: 0;
  padding: 0;
  width: 100vw;
  min-height: 100vh;
  font-family: 'PingFang SC', 'Microsoft YaHei', Arial, sans-serif;
  overflow-x: hidden;
  background: #a9e3fe url('blue-bg.jpg') no-repeat center center fixed;
  background-size: cover;
}
.main-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100vw;
  margin-top: 0;
}
.main-box {
  background: rgba(255,255,255,0.93);
  box-shadow: 0 4px 16px rgba(84,179,250,0.14);
  border-radius: 20px;
  padding: 32px 0 24px 0;        /* padding缩小 */
  text-align: center;
  margin-bottom: 44px;           /* 间距适中 */
  width: 38vw;                   /* 宽度缩小 */
  min-width: 240px;
  max-width: 500px;              /* 最大宽度缩小 */
  border: 1.5px solid #a6d6fc;
}
.main-box > div:first-child {
  font-size: 1.5em !important;    /* 标题缩小 */
  margin-bottom: 14px !important; /* 副标题间距适中 */
  letter-spacing: 3px;
  font-weight: 700;
}
.main-box > div:nth-child(2) {
  font-size: 1em !important;      /* 副标题缩小 */
  margin-top: 6px !important;
}

.calendar-container {
  background: rgba(255,255,255,0.93);
  border-radius: 24px;
  box-shadow: 0 2px 8px rgba(84,179,250,0.10);
  border: 1.8px solid #a6d6fc;
  padding: 48px 34px 32px 34px;     /* 日历padding加大 */
  max-width: 640px;
  width: 98vw;
  margin-bottom: 22px;
}
.calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 28px;              /* header和表格间距拉大 */
  user-select: none;
}
.calendar-title {
  font-size: 2.5em;
  color: #1976d2;
  font-weight: 900;
  letter-spacing: 4px;
}
.calendar-arrow {
  cursor: pointer;
  font-size: 2.1em;
  color: #1976d2;
  padding: 0 12px;
  background: none;
  border: none;
  transition: color 0.18s;
  border-radius: 8px;
  line-height: 1;
}
.calendar-arrow:active,
.calendar-arrow:hover {
  color: #1e90ff;
  background: #e0f1ff;
}
.calendar-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
  background: none;
}
.calendar-table th,
.calendar-table td {
  width: 14.28%;
  text-align: center;
  padding: 15px 0;
  font-size: 1.35em;
  border-radius: 18px;
  position: relative;
  cursor: pointer;
  user-select: none;
  transition: background 0.18s;
  min-height: 52px;
}
.calendar-table th {
  color: #1976d2;
  font-weight: bold;
  font-size: 1.15em;
  background: none;
  cursor: default;
}
/* 蓝色圆圈包裹日期数字 */
.calendar-table td.has-event .event-circle {
  display: inline-block;
  background: linear-gradient(135deg, #2196f3 60%, #51bbfe 100%);
  color: #fff;
  font-weight: bold;
  border-radius: 50%;
  width: 44px;
  height: 44px;
  line-height: 44px;
  font-size: 1.28em;
  box-shadow: 0 2px 8px rgba(84,179,250,0.13);
  border: 2.5px solid #e0f1ff;
  transition: box-shadow 0.18s, border 0.18s;
  position: relative;
  z-index: 1;
}
.calendar-table td.has-event.selected .event-circle,
.calendar-table td.has-event.today .event-circle {
  border: 2.5px solid #1e90ff;
  box-shadow: 0 0 0 4px #b0ddfd88;
}
.calendar-table td.today:not(.has-event) {
  background: #d7eefe;
  color: #1976d2;
  font-weight: bold;
  border: 1.5px solid #1e90ff;
}
.calendar-table td.selected:not(.has-event) {
  background: #b0ddfd;
  color: #1976d2;
  font-weight: bold;
  border: 2px solid #2196f3;
  z-index: 5;
}
.calendar-table td:hover:not(.empty):not(.selected) {
  background: #e6f5ff;
}
.calendar-table td.empty {
  background: none;
  cursor: default;
}
/* 小浮层 */
.event-popover {
  position: absolute;
  left: 50%;
  top: 105%;
  transform: translateX(-50%);
  background: #fff;
  border: 1.5px solid #a6d6fc;
  box-shadow: 0 2px 16px rgba(84,179,250,0.18);
  border-radius: 16px;
  padding: 18px 26px 16px 26px;
  font-size: 1.18em;
  color: #1976d2;
  min-width: 148px;
  max-width: 260px;
  z-index: 100;
  white-space: pre-wrap;
  word-break: break-all;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.18s;
}
.calendar-table td.selected .event-popover {
  opacity: 1;
  pointer-events: auto;
}
@media (max-width: 900px) {
  .main-box { width: 90vw; }
  .calendar-container { width: 99vw; max-width: 99vw;}
}
@media (max-width: 600px) {
  .main-box { width: 99vw; min-width: 0; padding: 22px 0 10px 0; margin-bottom: 28px;}
  .main-box > div:first-child { font-size: 1.3em !important; }
  .main-box > div:nth-child(2) { font-size: 1em !important;}
  .calendar-container { max-width: 99vw; padding: 12px 2px 8px 2px;}
  .calendar-title { font-size: 1.19em; }
  .calendar-header { margin-bottom: 14px;}
  .calendar-table th, .calendar-table td { font-size: 1em; min-height: 32px; padding: 6px 0;}
  .calendar-table td.has-event .event-circle { width: 28px; height: 28px; line-height: 28px; font-size: 1em;}
  .event-popover { padding: 10px 8px; font-size: 0.93em; }
}
.timeline-title-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 38px;
  margin-bottom: 2px;
  margin-top: 0;
}

.avatar-mini {
  width: 70px;
  height: 70px;
  border-radius: 50%;
  object-fit: cover;
  box-shadow: 0 2px 8px rgba(33,150,243,0.10);
  border: 2px solid #fff;
  background: #fff;
}

.timeline-title-text {
  color: #2196f3;
  font-size: 1.4em;
  font-weight: bold;
  letter-spacing: 2px;
}
</style>
</head>
<body>
    <canvas id="sakuraCanvas"></canvas>
  <div class="main-content">
    <div class="main-box">
      <div class="timeline-title-row">
    <img class="avatar-mini" src="A62A07FD46CF3AE4F9EA92855966E5E7.jpg" alt="van头像">
    <span class="timeline-title-text">纪念日历</span>
    <img class="avatar-mini" src="F0EA2A563C8A66514D51753ADA28B318.jpg" alt="smader头像">
      </div>
      <div style="color:#3171c9;font-size:1em;margin-top:7px;">
        重要时刻，一目了然
      </div>
    </div>
    <div class="calendar-container">
      <div class="calendar-header">
        <button class="calendar-arrow" id="prevMonth" title="上一月">&#8592;</button>
        <span class="calendar-title" id="calendarTitle"></span>
        <button class="calendar-arrow" id="nextMonth" title="下一月">&#8594;</button>
      </div>
      <table class="calendar-table" id="calendarTable">
        <!-- 日历表格动态插入 -->
      </table>
    </div>
    <a class="back-home" href="./index.html" style="
      display:inline-block;
      margin-top:16px;
      color:#2196f3;
      background:rgba(255,255,255,0.90);
      padding:7px 26px;
      border-radius:14px;
      text-decoration:none;
      font-size:1.1em;
      font-weight:bold;
      box-shadow:0 2px 8px rgba(84,179,250,0.08);
      border:1px solid #a6d6fc;
      transition:background 0.18s;
    " onmouseover="this.style.background='#e6f5ff'"
      onmouseout="this.style.background='rgba(255,255,255,0.90)'">
      返回首页
    </a>
  </div>
  <script>
    // 纪念事件数据（请在此直接维护）
    const events = [
      { date: '2023-12-09', title: '我们在一起啦' },
      { date: '2023-01-06', title: 'first kiss' },
      { date: '2024-03-18', title: '100天纪念日' },
      { date: '2024-06-26', title: '200天纪念日和石膏娃娃' },
      { date: '2024-12-09', title: '一周年纪念日' },
      { date: '2025-05-11', title: '520天纪念日' },
      { date: '2025-02-12', title: '第一次去一座陌生的城市——武汉之旅' },
      { date: '2025-06-20', title: '追星成功' },
      // 你可以在这里继续添加更多纪念事件
    ];

    // 辅助函数：格式化日期
    function formatDate(y, m, d) {
      return y + '-' + String(m).padStart(2, '0') + '-' + String(d).padStart(2, '0');
    }

    // 生成日历
    const calendarTable = document.getElementById('calendarTable');
    const calendarTitle = document.getElementById('calendarTitle');
    let today = new Date();
    let currentYear = today.getFullYear();
    let currentMonth = today.getMonth(); // 0-11

    function renderCalendar(year, month) {
      calendarTable.innerHTML = '';
      // 设置标题
      calendarTitle.textContent = `${year}年${month+1}月`;

      // 一周起始，日一二三四五六
      const daysOfWeek = ['日','一','二','三','四','五','六'];
      let thead = document.createElement('thead');
      let tr = document.createElement('tr');
      for (let d of daysOfWeek) {
        let th = document.createElement('th');
        th.textContent = d;
        tr.appendChild(th);
      }
      thead.appendChild(tr);
      calendarTable.appendChild(thead);

      let firstDay = new Date(year, month, 1);
      let startDay = firstDay.getDay();
      let daysInMonth = new Date(year, month+1, 0).getDate();

      let tbody = document.createElement('tbody');
      let date = 1 - startDay;
      for (let i=0; i<6; i++) { // 最多6周
        let tr = document.createElement('tr');
        for (let j=0; j<7; j++) {
          let td = document.createElement('td');
          if (date < 1 || date > daysInMonth) {
            td.className = 'empty';
            td.innerHTML = '&nbsp;';
          } else {
            let thisDateStr = formatDate(year, month+1, date);
            let event = events.find(ev => ev.date === thisDateStr);
            if (event) {
              td.classList.add('has-event');
              let circle = document.createElement('span');
              circle.className = 'event-circle';
              circle.textContent = date;
              td.appendChild(circle);
            } else {
              td.textContent = date;
            }
            // 高亮今日
            let now = new Date();
            if (date === now.getDate() && month === now.getMonth() && year === now.getFullYear()) {
              td.classList.add('today');
            }
            // 点击事件，显示小浮层
            td.addEventListener('click', function(e) {
              document.querySelectorAll('.calendar-table td.selected').forEach(el=>el.classList.remove('selected'));
              if (event) {
                td.classList.add('selected');
              } else {
                td.classList.add('selected');
                setTimeout(()=>{td.classList.remove('selected')}, 120); // 非事件日期闪烁一下
              }
            });
            // 小浮层内容
            if (event) {
              let popover = document.createElement('div');
              popover.className = 'event-popover';
              popover.textContent = event.title;
              td.appendChild(popover);
            }
          }
          tr.appendChild(td);
          date++;
        }
        tbody.appendChild(tr);
      }
      calendarTable.appendChild(tbody);
      // 关闭浮层（点击其他td）
      document.addEventListener('click', function(e) {
        if (!calendarTable.contains(e.target)) {
          document.querySelectorAll('.calendar-table td.selected').forEach(el=>el.classList.remove('selected'));
        }
      });
    }

    document.getElementById('prevMonth').onclick = function() {
      if (currentMonth === 0) {
        currentYear--;
        currentMonth = 11;
      } else {
        currentMonth--;
      }
      renderCalendar(currentYear, currentMonth);
    }
    document.getElementById('nextMonth').onclick = function() {
      if (currentMonth === 11) {
        currentYear++;
        currentMonth = 0;
      } else {
        currentMonth++;
      }
      renderCalendar(currentYear, currentMonth);
    }

    // 初始渲染
    renderCalendar(currentYear, currentMonth);
  </script>
  <script>
  // Sakura 蓝白花瓣飘落
  const canvas = document.getElementById('sakuraCanvas');
  let width = window.innerWidth, height = window.innerHeight;
  canvas.width = width; canvas.height = height;
  function random(min, max) { return Math.random() * (max - min) + min; }
  class Sakura {
    constructor() { this.reset(); }
    reset() {
      this.x = random(0, width);
      this.y = random(-50, height * 0.6);
      this.r = random(6, 14);
      this.angle = random(0, Math.PI * 2);
      this.speed = random(1.1, 2.1);
      this.rotateSpeed = random(0.007, 0.017);
      this.opacity = random(0.6, 0.9);
      this.swing = random(10, 26);
      this.swingSpeed = random(0.008, 0.016);
      this.swingAngle = random(0, Math.PI * 2);
      // 蓝白色樱花
      this.color = `rgba(${Math.floor(random(170,210))},${Math.floor(random(220,240))},255,${this.opacity})`;
    }
    update() {
      this.y += this.speed;
      this.angle += this.rotateSpeed;
      this.swingAngle += this.swingSpeed;
      this.x += Math.sin(this.swingAngle) * 0.7;
      if (this.y > height + 30 || this.x < -30 || this.x > width + 30) {
        this.reset();
        this.y = -30;
      }
    }
    draw(ctx) {
      ctx.save();
      ctx.translate(this.x, this.y);
      ctx.rotate(this.angle);
      for (let i = 0; i < 5; i++) {
        ctx.rotate(Math.PI * 2 / 5);
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.quadraticCurveTo(this.r*0.45, -this.r*0.1, this.r*0.6, -this.r*0.8);
        ctx.quadraticCurveTo(0, -this.r*0.7, -this.r*0.6, -this.r*0.8);
        ctx.quadraticCurveTo(-this.r*0.45, -this.r*0.1, 0, 0);
        ctx.closePath();
        ctx.fillStyle = this.color;
        ctx.shadowColor = "#c7e7ff";
        ctx.shadowBlur = 8;
        ctx.fill();
      }
      ctx.restore();
    }
  }
  let sakuras = [];
  function createSakuras() {
    sakuras = [];
    for(let i=0;i<36;i++) sakuras.push(new Sakura());
  }
  function animate() {
    ctx.clearRect(0,0,width,height);
    for(let i=0;i<sakuras.length;i++) {
      sakuras[i].update();
      sakuras[i].draw(ctx);
    }
    requestAnimationFrame(animate);
  }
  const ctx = canvas.getContext('2d');
  createSakuras();
  animate();
  window.addEventListener('resize', ()=>{
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width; canvas.height = height;
    createSakuras();
  });
</script>
</body>
</html>
